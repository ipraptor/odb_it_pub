# journalctl

В выводе journalctl -o verbose, уровень журналирования обычно представлен в виде числового кода
в метаданных каждого сообщения. Конкретный ключ или поле, отвечающее за уровень журналирования,
зависит от формата вывода, который используется для journalctl.

В случае формата вывода verbose, информация о уровне журналирования обычно содержится в поле PRIORITY.
Значение этого поля представляет собой числовой код уровня журналирования для данного сообщения.

Вот пример вывода journalctl -o verbose и соответствующей информации о уровне журналирования:
    PRIORITY=6

В этом примере PRIORITY=6, что соответствует уровню журналирования INFO.
Здесь числовой код 6 соответствует уровню журналирования INFO, в соответствии с стандартом syslog.
Вот как распределяются числовые значения в стандарте syslog:

0: EMERG или PANIC
1: ALERT
2: CRIT или CRITICAL
3: ERR или ERROR
4: WARNING или WARN
5: NOTICE
6: INFO
7: DEBUG

Таким образом, если вы видите PRIORITY=6, это означает, что сообщение имеет уровень журналирования INFO.

journalctl -o json | sed 's/}//g' | awk -F'[:,]' 'BEGIN {
    map["0"]="PANIC"; map["1"]="ALERT"; map["2"]="CRITICAL"; map["3"]="ERROR";
    map["4"]="WARNING"; map["5"]="NOTICE"; map["6"]="INFO"; map["7"]="DEBUG"
}
{
    for (i=1; i<=NF; i++) {
        if ($i == "\"PRIORITY\"") {
            priority=$(i+1);
            gsub(/[^0-9]/, "", priority);
        }
        if ($i == "\"_COMM\"") {
            comm=$(i+1);
        }
    }
    if (!(comm in seen)) {
        print comm, map[priority];
        seen[comm]=1
    }
}'
